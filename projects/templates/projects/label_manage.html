{% extends "base.html" %}
{% load static %}

{% block content %}
  <div class="container">
    <h1 class="mb-4">Labels verwalten für: <strong>{{ project.name }}</strong></h1>

    <form method="post" id="label-formset">
      {% csrf_token %}
      {{ formset.management_form }}

      <div id="formset-container">
        {% for form in formset %}
          <div class="formset-form border rounded p-3 mb-3 position-relative">
            <h5 class="form-label">Label {{ forloop.counter }}</h5>
            <div class="mb-2">
              {{ form.label.label_tag }} {{ form.label }}
            </div>
            <div class="mb-2">
              {{ form.value.label_tag }} {{ form.value }}
            </div>
            {% if form.DELETE %}
                {{ form.DELETE.as_hidden }}
                <button type="button" class="btn-close position-absolute top-0 end-0 m-2 remove-form" aria-label="Entfernen"></button>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <button type="button" class="btn btn-outline-secondary mb-3" id="add-form">
        + Label hinzufügen
      </button>

      <div>
        <button type="submit" class="btn btn-primary">Speichern</button>
        <a href="{% url 'projects:project_detail' project.pk %}" class="btn btn-secondary">Zurück</a>
      </div>
    </form>
  </div>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/label_manage_v2.js' %}"></script>
{% endblock %}